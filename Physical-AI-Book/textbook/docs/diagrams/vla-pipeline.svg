<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="800" height="400" viewBox="0 0 800 400">
  <title>VLA Pipeline: Voice Input to Robot Execution</title>
  <desc>Vision-Language-Action pipeline showing voice command processing through Whisper, LLM reasoning, and ROS 2 action execution</desc>

  <!-- Title -->
  <text x="400" y="25" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#000000">
    Vision-Language-Action (VLA) Pipeline
  </text>

  <!-- Stage 1: Voice Input -->
  <ellipse cx="80" cy="100" rx="60" ry="40" fill="#FFE8E8" stroke="#000000" stroke-width="2"/>
  <text x="80" y="95" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#000000">Voice Input</text>
  <text x="80" y="110" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333333">"Bring me</text>
  <text x="80" y="122" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333333">a red cup"</text>

  <!-- Arrow 1 -->
  <path d="M 140 100 L 175 100" fill="none" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="157" y="95" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666666">Audio</text>

  <!-- Stage 2: Whisper ASR -->
  <rect x="175" y="70" width="110" height="60" rx="8" fill="#D0E8FF" stroke="#000000" stroke-width="2"/>
  <text x="230" y="95" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#000000">Whisper ASR</text>
  <text x="230" y="110" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#333333">Speech â†’ Text</text>
  <text x="230" y="122" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#333333">0.7s latency</text>

  <!-- Arrow 2 -->
  <path d="M 285 100 L 320 100" fill="none" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="302" y="95" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666666">Text</text>

  <!-- Stage 3: LLM Planner -->
  <rect x="320" y="70" width="110" height="60" rx="8" fill="#E8FFD0" stroke="#000000" stroke-width="2"/>
  <text x="375" y="92" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#000000">LLM Planner</text>
  <text x="375" y="106" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#333333">Task decomposition</text>
  <text x="375" y="118" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#333333">GPT-4 / Llama</text>

  <!-- Arrow 3 -->
  <path d="M 430 100 L 465 100" fill="none" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="447" y="95" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666666">Actions</text>

  <!-- Stage 4: Action Executor -->
  <rect x="465" y="70" width="110" height="60" rx="8" fill="#FFE8D0" stroke="#000000" stroke-width="2"/>
  <text x="520" y="92" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#000000">Action Executor</text>
  <text x="520" y="106" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#333333">ROS 2 actions</text>
  <text x="520" y="118" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#333333">Nav2 + MoveIt</text>

  <!-- Arrow 4 -->
  <path d="M 575 100 L 610 100" fill="none" stroke="#000000" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="592" y="95" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#666666">Execute</text>

  <!-- Stage 5: Robot -->
  <ellipse cx="680" cy="100" rx="60" ry="40" fill="#D0FFE8" stroke="#000000" stroke-width="2"/>
  <text x="680" y="95" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#000000">Robot</text>
  <text x="680" y="110" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333333">Physical</text>
  <text x="680" y="122" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333333">Execution</text>

  <!-- Task Decomposition Box -->
  <rect x="310" y="160" width="280" height="160" rx="8" fill="#F8F8F8" stroke="#666666" stroke-width="1" stroke-dasharray="3,3"/>
  <text x="450" y="180" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#000000">LLM Output: Task Decomposition</text>

  <text x="320" y="200" font-family="Arial, sans-serif" font-size="10" text-anchor="start" fill="#333333">1. navigate_to(location="kitchen")</text>
  <text x="320" y="220" font-family="Arial, sans-serif" font-size="10" text-anchor="start" fill="#333333">2. detect_object(color="red", type="cup")</text>
  <text x="320" y="240" font-family="Arial, sans-serif" font-size="10" text-anchor="start" fill="#333333">3. grasp(object=$detected_object)</text>
  <text x="320" y="260" font-family="Arial, sans-serif" font-size="10" text-anchor="start" fill="#333333">4. navigate_to(location="user")</text>
  <text x="320" y="280" font-family="Arial, sans-serif" font-size="10" text-anchor="start" fill="#333333">5. handoff(person="user")</text>

  <text x="320" y="300" font-family="Arial, sans-serif" font-size="9" font-style="italic" text-anchor="start" fill="#666666">Reasoning: "Kitchen" inferred from context,</text>
  <text x="320" y="312" font-family="Arial, sans-serif" font-size="9" font-style="italic" text-anchor="start" fill="#666666">"red cup" parsed to detection params</text>

  <!-- Vision feedback arrow -->
  <path d="M 680 140 L 680 220 L 590 220" fill="none" stroke="#0066CC" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowhead-blue)"/>
  <text x="635" y="235" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#0066CC">Vision feedback</text>
  <text x="635" y="247" font-family="Arial, sans-serif" font-size="9" text-anchor="middle" fill="#0066CC">(camera, depth)</text>

  <!-- Performance Metrics Box -->
  <rect x="40" y="340" width="720" height="50" rx="5" fill="#F0F0F0" stroke="#666666" stroke-width="1"/>
  <text x="400" y="358" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#000000">End-to-End Performance</text>
  <text x="400" y="373" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333333">Whisper: 0.7s | LLM: 1.2s (GPT-4) or 0.3s (Llama 70B) | Action execution: 15-25s | Total: 17-27s</text>
  <text x="400" y="385" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#333333">Success rate: 90% (tested on 20 warehouse tasks) | Hardware: Jetson Orin (30W)</text>

  <!-- Arrow marker definitions -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#000000"/>
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#0066CC"/>
    </marker>
  </defs>
</svg>
